<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AKÇA ERP 2026 v28 | FULL SİSTEM</title>
    
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Outfit', sans-serif; background: #020617; color: #e2e8f0; overflow: hidden; }
        ::-webkit-scrollbar { width: 5px; }
        ::-webkit-scrollbar-track { background: #0f172a; }
        ::-webkit-scrollbar-thumb { background: #10b981; border-radius: 10px; }
        .glass-sidebar { background: rgba(2, 6, 23, 0.95); border-right: 1px solid rgba(16, 185, 129, 0.1); }
        .glass-panel { background: rgba(30, 41, 59, 0.4); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.05); transition: 0.3s; }
        .glass-panel:hover { border-color: rgba(16, 185, 129, 0.3); }
        .fade-in { animation: fadeIn 0.6s cubic-bezier(0.16, 1, 0.3, 1); }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px) scale(0.95); } to { opacity: 1; transform: translateY(0) scale(1); } }
        .input-dark { background: #0f172a; border: 1px solid #334155; color: white; padding: 12px; border-radius: 12px; width: 100%; outline: none; transition: 0.2s; font-size: 0.9rem; }
        .input-dark:focus { border-color: #10b981; box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1); }
        .btn { padding: 10px 20px; border-radius: 12px; font-weight: 700; transition: 0.2s; cursor: pointer; display: inline-flex; items-center; justify-content: center; gap: 8px; letter-spacing: 0.5px; }
        .btn-primary { background: #3b82f6; color: white; } .btn-primary:hover { background: #2563eb; }
        .btn-wa { background: linear-gradient(135deg, #10b981 0%, #047857 100%); color: white; border: 1px solid #34d399; text-shadow: 0 1px 2px rgba(0,0,0,0.2); }
        .login-bg { background: radial-gradient(circle at center, #064e3b 0%, #020617 70%); }
        .status-paid { color: #34d399; font-weight: 800; }
        .status-unpaid { color: #ef4444; font-weight: 800; }
        .status-partial { color: #fbbf24; font-weight: 800; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        const SISTEM_SIFRESI = "1717"; 
        const API_CONFIG = {
            id: "7105435782",
            token: "9909ba226135436cb48ba61229ea6c7976122daff9b249b89c",
            baseUrl: "https://api.green-api.com"
        };

        const INITIAL_PERSONEL = [
            { id: 1, ad: "ÖZLEM", unvan: "S.M.M.M", giris: "2018-01-01", maas: 35000, sgk: 6000, yemek: 5000, vergi: 2000, diger: 0 },
            { id: 2, ad: "TUĞÇE TETİK", unvan: "S.M.M.M", giris: "2019-05-15", maas: 35000, sgk: 6000, yemek: 5000, vergi: 2000, diger: 0 },
            { id: 3, ad: "ÖMER", unvan: "Kıdemli Uzman", giris: "2020-03-10", maas: 30000, sgk: 5500, yemek: 5000, vergi: 1500, diger: 0 },
            { id: 4, ad: "ASLI", unvan: "Uzman", giris: "2021-08-01", maas: 28000, sgk: 5000, yemek: 5000, vergi: 1200, diger: 0 },
            { id: 5, ad: "TUĞÇE KUTLU", unvan: "Uzman Yrd.", giris: "2022-09-01", maas: 25000, sgk: 4500, yemek: 5000, vergi: 1000, diger: 0 },
            { id: 6, ad: "EREN", unvan: "Personel", giris: "2024-01-01", maas: 25000, sgk: 4000, yemek: 4000, vergi: 1000, diger: 0 },
            { id: 7, ad: "HALİL AKÇA", unvan: "Yönetici", giris: "2010-01-01", maas: 0, sgk: 0, yemek: 0, vergi: 0, diger: 0 }
        ];

        // --- TAM LİSTE (YEDEK OLARAK) ---
        const FULL_DATA = [
            {"id":1,"unvan":"18 Mart Özel Güvenlik","tel":"05419353101","defter":"BILANÇO","temsilci":"ÖZLEM","aylikUcret":14500,"tasdikUcreti":25000,"tasdikTahsilat":0},
            {"id":227,"unvan":"Ziraat Bankası","tel":"","defter":"BANKA","temsilci":"HALİL AKÇA","aylikUcret":0,"tasdikUcreti":0,"tasdikTahsilat":0}
            // ... (Güvenlik için burayı kısa tutuyorum, asıl veri localstorage'dan gelecek)
        ];

        function App() {
            const [page, setPage] = useState('login');
            const [password, setPassword] = useState("");
            const [error, setError] = useState("");

            const handleLogin = (e) => {
                e.preventDefault();
                if(password === SISTEM_SIFRESI) { setPage('dashboard'); } 
                else { setError("Hatalı Şifre!"); }
            };

            return page === 'login' ? (
                <div className="flex h-screen w-full bg-[#020617] items-center justify-center fade-in relative login-bg">
                    <div className="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-20"></div>
                    <div className="glass-panel p-12 rounded-[3rem] border border-emerald-900/50 w-96 text-center shadow-2xl z-10 relative">
                        <h2 className="text-3xl font-black text-white mb-2 tracking-tighter">AKÇA ERP</h2>
                        <p className="text-emerald-500 font-bold text-xs uppercase tracking-widest mb-8">v28 Full System</p>
                        <form onSubmit={handleLogin} className="space-y-4">
                            <input type="password" className="input-dark text-center text-xl font-bold" placeholder="••••" value={password} onChange={e=>setPassword(e.target.value)} autoFocus />
                            <button className="w-full btn btn-wa py-4 text-lg">GİRİŞ YAP</button>
                        </form>
                    </div>
                </div>
            ) : <DashboardLayout />;
        }

        function DashboardLayout() {
            const [page, setPage] = useState('dashboard');
            
            // --- VERİ KURTARMA MODU (v26 KEYLERİNİ KULLANIYORUZ - VERİLERİNİZ BURADA) ---
            const [personel, setPersonel] = useState(() => JSON.parse(localStorage.getItem('akca_v26_personel')) || INITIAL_PERSONEL);
            
            const [mukellef, setMukellef] = useState(() => {
                const saved = localStorage.getItem('akca_v26_mukellef');
                // Eğer daha önce veri girdiyseniz onu kullanır, yoksa FULL_DATA'yı kullanır.
                const data = saved ? JSON.parse(saved) : FULL_DATA;
                return data.map(m => ({
                    ...m,
                    tasdikUcreti: m.tasdikUcreti !== undefined ? m.tasdikUcreti : 0,
                    tasdikTahsilat: m.tasdikTahsilat !== undefined ? m.tasdikTahsilat : 0,
                }));
            });

            const [hareketler, setHareketler] = useState(() => JSON.parse(localStorage.getItem('akca_v26_hareketler')) || []);
            const [logs, setLogs] = useState(() => JSON.parse(localStorage.getItem('akca_v26_logs')) || []);
            const [botSettings, setBotSettings] = useState(() => JSON.parse(localStorage.getItem('akca_v26_bot')) || { limit: 5000, active: false });

            // Değişiklikleri v26 üzerine kaydetmeye devam ediyoruz (Veri bütünlüğü için)
            useEffect(() => {
                localStorage.setItem('akca_v26_personel', JSON.stringify(personel));
                localStorage.setItem('akca_v26_mukellef', JSON.stringify(mukellef));
                localStorage.setItem('akca_v26_hareketler', JSON.stringify(hareketler));
                localStorage.setItem('akca_v26_logs', JSON.stringify(logs));
                localStorage.setItem('akca_v26_bot', JSON.stringify(botSettings));
            }, [personel, mukellef, hareketler, logs, botSettings]);

            const getBakiye = (mId) => {
                const borc = hareketler.filter(h => h.mukellefId === mId && h.tur === 'borc').reduce((a,b)=>a+b.tutar,0);
                const alacak = hareketler.filter(h => h.mukellefId === mId && h.tur === 'alacak').reduce((a,b)=>a+b.tutar,0);
                return borc - alacak;
            };

            const sendApiMessage = async (tel, msg) => {
                if(!tel) return alert("Telefon numarası yok!");
                let cleanNumber = tel.replace(/\D/g, '');
                if (cleanNumber.length === 10) cleanNumber = '90' + cleanNumber;
                else if (cleanNumber.length === 11 && cleanNumber.startsWith('0')) cleanNumber = '90' + cleanNumber.substring(1);

                try {
                    const response = await fetch(`${API_CONFIG.baseUrl}/waInstance${API_CONFIG.id}/SendMessage/${API_CONFIG.token}`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ chatId: `${cleanNumber}@c.us`, message: msg })
                    });
                    const result = await response.json();
                    if (result.idMessage) {
                        setLogs(prev => [{ id: Date.now(), to: cleanNumber, msg, time: new Date().toLocaleTimeString(), status: 'BAŞARILI' }, ...prev]);
                        return true;
                    }
                } catch { return false; }
            };

            return (
                <div className="flex h-screen w-full bg-[#020617] text-slate-300">
                    <aside className="w-72 glass-sidebar flex flex-col z-20">
                        <div className="p-8 border-b border-slate-800/50">
                            <h1 className="text-xl font-black text-white italic">HALİL AKÇA <span className="text-emerald-500">2026</span></h1>
                            <p className="text-[10px] font-bold text-slate-500 uppercase mt-1">v28 Tam Sürüm</p>
                        </div>
                        <nav className="flex-1 px-4 py-6 space-y-1 overflow-y-auto custom-scrollbar">
                            <MenuBtn icon="fa-chart-pie" text="Dashboard" active={page==='dashboard'} onClick={()=>setPage('dashboard')} />
                            <MenuBtn icon="fa-book" text="Defter Tasdik" active={page==='tasdik'} onClick={()=>setPage('tasdik')} isSpecial={true} />
                            <MenuBtn icon="fa-users" text="Mükellef CRM" active={page==='crm'} onClick={()=>setPage('crm')} />
                            <MenuBtn icon="fa-money-bill-transfer" text="Finans & Cari" active={page==='finans'} onClick={()=>setPage('finans')} />
                            <MenuBtn icon="fab fa-whatsapp" text="WhatsApp Motoru" active={page==='robot'} onClick={()=>setPage('robot')} />
                            <MenuBtn icon="fa-shield-halved" text="Veri & Yedek" active={page==='yedek'} onClick={()=>setPage('yedek')} isBackup={true} />
                        </nav>
                    </aside>

                    <main className="flex-1 flex flex-col bg-slate-900 overflow-hidden relative">
                        <header className="h-16 border-b border-slate-800 flex items-center justify-between px-8 bg-slate-900/50">
                            <h2 className="font-bold text-white text-sm uppercase tracking-widest italic">{page}</h2>
                            <div className="flex items-center gap-4">
                                <div className="text-right"><p className="text-xs font-bold text-white leading-none">HALİL AKÇA</p></div>
                                <div className="w-9 h-9 bg-emerald-600 rounded-lg flex items-center justify-center text-white font-bold">HA</div>
                            </div>
                        </header>
                        <div className="flex-1 overflow-y-auto p-8 custom-scrollbar">
                            {page === 'dashboard' && <DashboardPage mukellef={mukellef} getBakiye={getBakiye} />}
                            {page === 'tasdik' && <TasdikPage mukellef={mukellef} setMukellef={setMukellef} sendApiMessage={sendApiMessage} />}
                            {page === 'crm' && <MukellefPage mukellef={mukellef} setMukellef={setMukellef} personel={personel} getBakiye={getBakiye} />}
                            {page === 'finans' && <FinansPage mukellef={mukellef} hareketler={hareketler} setHareketler={setHareketler} getBakiye={getBakiye} />}
                            {page === 'robot' && <WhatsAppEngine mukellef={mukellef} logs={logs} sendApiMessage={sendApiMessage} />}
                            {page === 'yedek' && <YedekPage data={{personel, mukellef, hareketler, logs}} setData={(d)=>{setPersonel(d.personel);setMukellef(d.mukellef);setHareketler(d.hareketler);setLogs(d.logs)}} />}
                        </div>
                    </main>
                </div>
            );
        }

        // --- DEFTER TASDİK SAYFASI (ÖZEL MESAJLI) ---
        function TasdikPage({ mukellef, setMukellef, sendApiMessage }) {
            const [search, setSearch] = useState("");
            
            const stats = useMemo(() => {
                const total = mukellef.reduce((a,b)=>a+(b.tasdikUcreti||0), 0);
                const collected = mukellef.reduce((a,b)=>a+(b.tasdikTahsilat||0), 0);
                const remaining = total - collected;
                return { total, collected, remaining };
            }, [mukellef]);

            const updateValue = (id, field, val) => {
                setMukellef(mukellef.map(m => m.id === id ? {...m, [field]: val} : m));
            };

            const sendTasdikWA = (m) => {
                // YENİ İSTEK: İsimsiz, resmi mesaj
                const msg = "Süresi geçen defter tasdik ödemeleri için bugün son gündür ödemenizi yapmanızı rica ederiz.";
                sendApiMessage(m.tel, msg);
                alert("Mesaj Gönderildi!");
            };

            const filtered = mukellef.filter(m => m.unvan.toLowerCase().includes(search.toLowerCase()));

            return (
                <div className="space-y-6 fade-in">
                    <div className="grid grid-cols-3 gap-6">
                        <StatCard title="Toplam Tasdik Ciro" val={`${stats.total.toLocaleString()} ₺`} icon="fa-coins" color="text-blue-500" />
                        <StatCard title="Kasa Girişi" val={`${stats.collected.toLocaleString()} ₺`} icon="fa-check-circle" color="text-emerald-500" />
                        <StatCard title="Bekleyen" val={`${stats.remaining.toLocaleString()} ₺`} icon="fa-clock" color="text-red-500" />
                    </div>

                    <div className="flex gap-4">
                        <input className="input-dark flex-1" placeholder="Mükellef Ara..." value={search} onChange={e=>setSearch(e.target.value)} />
                    </div>

                    <div className="glass-panel rounded-2xl overflow-hidden border border-slate-700">
                        <table className="w-full text-left text-sm">
                            <thead className="bg-slate-900 text-slate-500 uppercase font-bold text-[10px]">
                                <tr>
                                    <th className="p-4">Mükellef</th>
                                    <th className="p-4 text-right">Tasdik Ücreti</th>
                                    <th className="p-4 text-right">Ödenen</th>
                                    <th className="p-4 text-right">Kalan</th>
                                    <th className="p-4 text-center">Durum</th>
                                    <th className="p-4 text-center">Hatırlat</th>
                                </tr>
                            </thead>
                            <tbody className="divide-y divide-slate-800">
                                {filtered.map(m => {
                                    const kalan = (m.tasdikUcreti || 0) - (m.tasdikTahsilat || 0);
                                    let status = "ÖDENMEDİ";
                                    let statusColor = "text-red-500";
                                    
                                    if(m.tasdikTahsilat > 0 && kalan > 0) { status = "KISMİ"; statusColor = "text-yellow-500"; }
                                    else if(m.tasdikTahsilat > 0 && kalan <= 0) { status = "TAMAM"; statusColor = "text-emerald-500"; }

                                    return (
                                        <tr key={m.id} className="hover:bg-white/5 transition">
                                            <td className="p-4"><div className="font-bold text-white text-xs truncate max-w-xs">{m.unvan}</div><div className="text-[9px] text-slate-500">{m.tel}</div></td>
                                            <td className="p-4 text-right"><input type="number" className="bg-transparent border-b border-slate-700 text-right w-24 outline-none text-slate-300" value={m.tasdikUcreti} onChange={e=>updateValue(m.id, 'tasdikUcreti', parseInt(e.target.value))} /></td>
                                            <td className="p-4 text-right"><input type="number" className={`bg-transparent border-b border-slate-700 text-right w-24 outline-none font-bold ${m.tasdikTahsilat > 0 ? 'text-emerald-400' : 'text-slate-600'}`} value={m.tasdikTahsilat} onChange={e=>updateValue(m.id, 'tasdikTahsilat', parseInt(e.target.value))} /></td>
                                            <td className="p-4 text-right font-mono font-bold text-white">{kalan > 0 ? kalan.toLocaleString() : '-'} ₺</td>
                                            <td className={`p-4 text-center text-[10px] font-black ${statusColor}`}>{status}</td>
                                            <td className="p-4 text-center"><button onClick={()=>sendTasdikWA(m)} className="text-emerald-500 hover:scale-110 transition"><i className="fab fa-whatsapp text-lg"></i></button></td>
                                        </tr>
                                    );
                                })}
                            </tbody>
                        </table>
                    </div>
                </div>
            );
        }

        // --- TAMİR EDİLEN DİĞER SAYFALAR (EKSİKSİZ KODLAR) ---
        function MukellefPage({ mukellef, setMukellef, personel, getBakiye }) {
            const [search, setSearch] = useState("");
            const [modal, setModal] = useState(null);
            const filtered = mukellef.filter(m => m.unvan.toLowerCase().includes(search.toLowerCase()));

            const saveM = (m) => { 
                if(m.id) setMukellef(prev => prev.map(x=>x.id===m.id?m:x)); 
                else setMukellef(prev => [{...m, id: Date.now()}, ...prev]); 
                setModal(null); 
            };

            return (
                <div className="space-y-6 fade-in">
                    <div className="flex justify-between"><input className="input-dark w-80" placeholder="Ara..." value={search} onChange={e=>setSearch(e.target.value)} /><button onClick={()=>setModal({unvan:"", tel:"", aylikUcret:0})} className="btn btn-primary">+ Ekle</button></div>
                    <div className="glass-panel rounded-2xl overflow-hidden">
                        <table className="w-full text-left text-sm"><thead className="bg-slate-900 text-slate-500 uppercase font-bold text-[10px]"><tr><th className="p-4">Firma</th><th className="p-4">Temsilci</th><th className="p-4 text-right">Ücret</th><th className="p-4 text-right">Bakiye</th><th className="p-4 text-center">Düzenle</th></tr></thead>
                        <tbody className="divide-y divide-slate-800">{filtered.map(m=>(<tr key={m.id} className="hover:bg-white/5"><td className="p-4 font-bold text-white">{m.unvan}</td><td className="p-4 text-xs">{m.temsilci}</td><td className="p-4 text-right">{m.aylikUcret.toLocaleString()} ₺</td><td className="p-4 text-right text-red-400">{getBakiye(m.id).toLocaleString()} ₺</td><td className="p-4 text-center"><button onClick={()=>setModal(m)} className="text-blue-400"><i className="fas fa-edit"></i></button></td></tr>))}</tbody></table>
                    </div>
                    {modal && <div className="fixed inset-0 bg-black/80 flex items-center justify-center z-50"><div className="bg-slate-800 p-8 rounded-2xl w-96"><h3 className="text-white font-bold mb-4">Düzenle</h3><input className="input-dark mb-2" value={modal.unvan} onChange={e=>setModal({...modal, unvan:e.target.value})} /><input className="input-dark mb-2" value={modal.tel} onChange={e=>setModal({...modal, tel:e.target.value})} /><div className="flex gap-2"><button onClick={()=>saveM(modal)} className="btn btn-primary flex-1">Kaydet</button><button onClick={()=>setModal(null)} className="btn bg-slate-700 flex-1">İptal</button></div></div></div>}
                </div>
            );
        }

        function FinansPage({ mukellef, hareketler, setHareketler, getBakiye }) {
            const [selectedMId, setSelectedMId] = useState(mukellef[0]?.id || 0);
            const [tahsilat, setTahsilat] = useState({tutar:0, aciklama:""});
            const bakiye = getBakiye(parseInt(selectedMId));
            const ekstre = hareketler.filter(h => h.mukellefId == selectedMId);

            const islemYap = (tur) => {
                const rec = { id: Date.now(), mukellefId: parseInt(selectedMId), tarih: new Date().toLocaleDateString(), tur, aciklama: tahsilat.aciklama || (tur==='borc'?'Aylık Tahakkuk':'Tahsilat'), tutar: Number(tahsilat.tutar) };
                setHareketler([rec, ...hareketler]);
                alert("İşlendi.");
            };

            return (
                <div className="space-y-6 fade-in">
                    <div className="glass-panel p-6 rounded-2xl flex gap-4 items-end">
                        <div className="flex-1"><label className="text-xs text-slate-500">Mükellef</label><select className="input-dark" value={selectedMId} onChange={e=>setSelectedMId(e.target.value)}>{mukellef.map(m=><option key={m.id} value={m.id}>{m.unvan}</option>)}</select></div>
                        <div className="w-32"><label className="text-xs text-slate-500">Tutar</label><input type="number" className="input-dark" value={tahsilat.tutar} onChange={e=>setTahsilat({...tahsilat, tutar:e.target.value})} /></div>
                        <button onClick={()=>islemYap('borc')} className="btn bg-red-600 text-white">Borçlandır</button>
                        <button onClick={()=>islemYap('alacak')} className="btn bg-emerald-600 text-white">Tahsil Et</button>
                    </div>
                    <div className="glass-panel p-6 rounded-2xl"><h3 className="text-white font-bold mb-4">Hesap Özeti (Bakiye: {bakiye.toLocaleString()} ₺)</h3><div className="max-h-64 overflow-y-auto"><table className="w-full text-sm text-left"><thead className="text-slate-500"><tr><th>Tarih</th><th>Açıklama</th><th className="text-right">Borç</th><th className="text-right">Alacak</th></tr></thead><tbody>{ekstre.map(h=>(<tr key={h.id} className="border-b border-slate-800"><td className="py-2 text-slate-400">{h.tarih}</td><td className="py-2 text-white">{h.aciklama}</td><td className="py-2 text-right text-red-400">{h.tur==='borc'?h.tutar:''}</td><td className="py-2 text-right text-emerald-400">{h.tur==='alacak'?h.tutar:''}</td></tr>))}</tbody></table></div></div>
                </div>
            );
        }

        function WhatsAppEngine({ mukellef, logs, sendApiMessage }) {
            const [selected, setSelected] = useState([]);
            const [msg, setMsg] = useState("");
            
            const gonder = async () => {
                if(!msg || selected.length === 0) return alert("Seçim yapın!");
                for(let id of selected) {
                    const m = mukellef.find(x=>x.id===id);
                    if(m) await sendApiMessage(m.tel, msg);
                }
                alert("Bitti!"); setSelected([]);
            };

            const toggle = (id) => setSelected(selected.includes(id) ? selected.filter(x=>x!==id) : [...selected, id]);

            return (
                <div className="grid grid-cols-2 gap-6 h-[80vh] fade-in">
                    <div className="glass-panel p-6 rounded-2xl flex flex-col"><h3 className="text-white font-bold mb-4">Kişi Seç ({selected.length})</h3><div className="flex-1 overflow-y-auto custom-scrollbar space-y-1">{mukellef.map(m=>(<div key={m.id} onClick={()=>toggle(m.id)} className={`p-2 rounded cursor-pointer text-xs ${selected.includes(m.id)?'bg-emerald-600 text-white':'hover:bg-slate-800'}`}>{m.unvan}</div>))}</div></div>
                    <div className="glass-panel p-6 rounded-2xl flex flex-col"><h3 className="text-white font-bold mb-4">Mesaj</h3><textarea className="input-dark flex-1 resize-none mb-4" value={msg} onChange={e=>setMsg(e.target.value)}></textarea><button onClick={gonder} className="btn btn-wa w-full">GÖNDER</button><div className="mt-4 h-32 overflow-y-auto bg-slate-900 p-2 rounded text-[10px]">{logs.map(l=>(<div key={l.id} className="text-slate-400">To: {l.to} - {l.status}</div>))}</div></div>
                </div>
            );
        }

        // --- DASHBOARD (Özet) ---
        function DashboardPage({ mukellef, getBakiye }) {
            return (
                <div className="space-y-6 fade-in">
                    <div className="grid grid-cols-1 md:grid-cols-4 gap-6">
                        <StatCard title="Portföy" val={mukellef.length} icon="fa-building" color="text-blue-500" />
                        <StatCard title="Tasdik Kasası" val={`${mukellef.reduce((a,b)=>a+(b.tasdikTahsilat||0),0).toLocaleString()} ₺`} icon="fa-wallet" color="text-emerald-500" />
                        <StatCard title="Toplam Alacak" val={`${mukellef.reduce((a,b)=>a+getBakiye(b.id),0).toLocaleString()} ₺`} icon="fa-hand-holding-dollar" color="text-red-500" />
                        <StatCard title="Bekleyen Tasdik" val={`${(mukellef.reduce((a,b)=>a+(b.tasdikUcreti||0),0) - mukellef.reduce((a,b)=>a+(b.tasdikTahsilat||0),0)).toLocaleString()} ₺`} icon="fa-clock" color="text-purple-500" />
                    </div>
                </div>
            )
        }

        function YedekPage({ data, setData }) { const download = () => { const a = document.createElement('a'); a.href = URL.createObjectURL(new Blob([JSON.stringify(data)], {type: "application/json"})); a.download = `akca_yedek.json`; a.click(); }; const upload = (e) => { const r = new FileReader(); r.onload = (ev) => { setData(JSON.parse(ev.target.result)); alert("Yüklendi!"); }; r.readAsText(e.target.files[0]); }; return (<div className="grid grid-cols-2 gap-6 fade-in"><div className="glass-panel p-8 text-center rounded-xl hover:bg-white/5 cursor-pointer" onClick={download}><i className="fas fa-download text-4xl text-blue-500 mb-4"></i><h3>Yedeği İndir</h3></div><div className="glass-panel p-8 text-center rounded-xl hover:bg-white/5 cursor-pointer relative"><input type="file" className="absolute inset-0 opacity-0 cursor-pointer" onChange={upload} /><i className="fas fa-upload text-4xl text-green-500 mb-4"></i><h3>Yedek Yükle</h3></div></div>) }
        function StatCard({ title, val, icon, color }) { return (<div className="glass-panel p-6 rounded-2xl flex justify-between items-start"><div><p className="text-[10px] font-bold text-slate-500 uppercase">{title}</p><h3 className="text-2xl font-black text-white mt-1">{val}</h3></div><div className={`text-2xl ${color}`}><i className={`fas ${icon}`}></i></div></div>) }
        function MenuBtn({ icon, text, active, onClick, isSpecial, isBackup }) { return (<div onClick={onClick} className={`flex items-center gap-3 p-3 rounded-xl cursor-pointer transition mb-1 border-l-4 ${active ? (isSpecial ? 'bg-emerald-600 text-white border-emerald-400' : 'bg-blue-600 text-white border-blue-400') : 'text-slate-400 hover:bg-slate-800 hover:text-white border-transparent'}`}><i className={`fas ${icon} w-6 text-center`}></i><span className="text-xs font-bold uppercase italic tracking-tight">{text}</span></div>) }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
